--data_dir=./MSLR_10k_letor/tmp_data/ --model_dir=./MSLR_10k_letor/tmp_model_singlet_pointwiseem/ --output_dir=./MSLR_10k_letor/tmp_output/ --setting_file=./example/offline_setting/pointwise_regression_EM_exp_settings.json
WARNING:tensorflow:From main.py:272: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.

WARNING:tensorflow:From main.py:107: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

W0629 22:10:31.823528 139698143872832 module_wrapper.py:139] From main.py:107: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

WARNING:tensorflow:From main.py:109: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

W0629 22:10:31.823869 139698143872832 module_wrapper.py:139] From main.py:109: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

2021-06-29 22:10:31.824553: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2021-06-29 22:10:31.831973: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494140000 Hz
2021-06-29 22:10:31.832440: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x46809f0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2021-06-29 22:10:31.832465: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:99: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.

W0629 22:10:31.838445 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:99: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:118: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

W0629 22:10:34.605648 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:118: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:62: The name tf.get_variable_scope is deprecated. Please use tf.compat.v1.get_variable_scope instead.

W0629 22:10:36.209656 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:62: The name tf.get_variable_scope is deprecated. Please use tf.compat.v1.get_variable_scope instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:63: The name tf.AUTO_REUSE is deprecated. Please use tf.compat.v1.AUTO_REUSE instead.

W0629 22:10:36.209908 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:63: The name tf.AUTO_REUSE is deprecated. Please use tf.compat.v1.AUTO_REUSE instead.

WARNING:tensorflow:From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.
Instructions for updating:
If using Keras pass *_constraint arguments to layers.
W0629 22:10:36.258696 139698143872832 deprecation.py:506] From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.
Instructions for updating:
If using Keras pass *_constraint arguments to layers.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/base_ranking_model.py:121: The name tf.get_variable is deprecated. Please use tf.compat.v1.get_variable instead.

W0629 22:10:36.272042 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/base_ranking_model.py:121: The name tf.get_variable is deprecated. Please use tf.compat.v1.get_variable instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:85: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
W0629 22:10:38.041719 139698143872832 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:85: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:278: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
W0629 22:10:42.245760 139698143872832 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:278: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:122: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

W0629 22:10:42.284699 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:122: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:172: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
W0629 22:10:42.821381 139698143872832 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:172: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:143: The name tf.summary.histogram is deprecated. Please use tf.compat.v1.summary.histogram instead.

W0629 22:10:43.919972 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:143: The name tf.summary.histogram is deprecated. Please use tf.compat.v1.summary.histogram instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:409: calling reduce_sum_v1 (from tensorflow.python.ops.math_ops) with keep_dims is deprecated and will be removed in a future version.
Instructions for updating:
keep_dims is deprecated, use keepdims instead
W0629 22:10:43.976368 139698143872832 deprecation.py:506] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:409: calling reduce_sum_v1 (from tensorflow.python.ops.math_ops) with keep_dims is deprecated and will be removed in a future version.
Instructions for updating:
keep_dims is deprecated, use keepdims instead
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:48: The name tf.ceil is deprecated. Please use tf.math.ceil instead.

W0629 22:10:44.001713 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:48: The name tf.ceil is deprecated. Please use tf.math.ceil instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:48: The name tf.random_uniform is deprecated. Please use tf.random.uniform instead.

W0629 22:10:44.001930 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:48: The name tf.random_uniform is deprecated. Please use tf.random.uniform instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:171: The name tf.trainable_variables is deprecated. Please use tf.compat.v1.trainable_variables instead.

W0629 22:10:44.014841 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:171: The name tf.trainable_variables is deprecated. Please use tf.compat.v1.trainable_variables instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:177: The name tf.train.AdagradOptimizer is deprecated. Please use tf.compat.v1.train.AdagradOptimizer instead.

W0629 22:10:44.015112 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:177: The name tf.train.AdagradOptimizer is deprecated. Please use tf.compat.v1.train.AdagradOptimizer instead.

WARNING:tensorflow:From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/training/adagrad.py:76: calling Constant.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.
Instructions for updating:
Call initializer instance with the dtype argument instead of passing it to the constructor
W0629 22:10:44.445967 139698143872832 deprecation.py:506] From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/training/adagrad.py:76: calling Constant.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.
Instructions for updating:
Call initializer instance with the dtype argument instead of passing it to the constructor
INFO:tensorflow:Summary name Gradient Norm is illegal; using Gradient_Norm instead.
I0629 22:10:44.527437 139698143872832 summary_op_util.py:66] Summary name Gradient Norm is illegal; using Gradient_Norm instead.
INFO:tensorflow:Summary name Learning Rate is illegal; using Learning_Rate instead.
I0629 22:10:44.528587 139698143872832 summary_op_util.py:66] Summary name Learning Rate is illegal; using Learning_Rate instead.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:227: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

W0629 22:10:45.056401 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:227: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

W0629 22:10:45.065777 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.global_variables is deprecated. Please use tf.compat.v1.global_variables instead.

W0629 22:10:45.065997 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.global_variables is deprecated. Please use tf.compat.v1.global_variables instead.

WARNING:tensorflow:From main.py:74: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.

W0629 22:10:45.115222 139698143872832 module_wrapper.py:139] From main.py:74: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.

WARNING:tensorflow:From main.py:123: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

W0629 22:10:46.214652 139698143872832 module_wrapper.py:139] From main.py:123: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/data_utils.py:367: The name tf.Summary is deprecated. Please use tf.compat.v1.Summary instead.

W0629 22:11:23.231390 139698143872832 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/data_utils.py:367: The name tf.Summary is deprecated. Please use tf.compat.v1.Summary instead.

Reading data in ./MSLR_10k_letor/tmp_data/
Read data from ./MSLR_10k_letor/tmp_data//train in ULTRA format.
Feature reading finish.
List reading finish.
Label reading finish.
Remove 183 invalid queries.
Data reading finish!
Finished reading 5817 queries with lists.
Read data from ./MSLR_10k_letor/tmp_data//valid in ULTRA format.
Feature reading finish.
List reading finish.
Label reading finish.
Remove 0 invalid queries.
Data reading finish!
Finished reading 1939 queries with lists.
Train Rank list size 809
Valid Rank list size 908
Users can only see the top 10 documents for each query in training.
Creating model...
Build Pairwise RegressionEM algorithm.
pointwise_only=True
<ultra.utils.losses_impl.DCGLambdaWeight object at 0x7f0de255f828>
Created model with fresh parameters.
Create simluated clicks feed

Create direct label feed with list size 908 with feature size 136
global step 50 learning rate 0.0500 step-time 0.15 loss 4.6888
  valid: mrr_3:0.483 mrr_5:0.483 mrr_10:0.483 ndcg_3:0.098 ndcg_5:0.118 ndcg_10:0.158
Save model, valid ndcg_10:0.158
global step 100 learning rate 0.0500 step-time 0.10 loss 4.2455
  valid: mrr_3:0.485 mrr_5:0.485 mrr_10:0.485 ndcg_3:0.098 ndcg_5:0.119 ndcg_10:0.159
Save model, valid ndcg_10:0.159
global step 150 learning rate 0.0500 step-time 0.10 loss 4.2772
  valid: mrr_3:0.485 mrr_5:0.485 mrr_10:0.485 ndcg_3:0.098 ndcg_5:0.119 ndcg_10:0.159
Save model, valid ndcg_10:0.159
global step 200 learning rate 0.0500 step-time 0.10 loss 4.3591
  valid: mrr_3:0.486 mrr_5:0.486 mrr_10:0.486 ndcg_3:0.099 ndcg_5:0.119 ndcg_10:0.159
Save model, valid ndcg_10:0.159
global step 250 learning rate 0.0500 step-time 0.10 loss 4.4543
  valid: mrr_3:0.486 mrr_5:0.486 mrr_10:0.486 ndcg_3:0.099 ndcg_5:0.119 ndcg_10:0.159
global step 300 learning rate 0.0500 step-time 0.10 loss 4.5634
  valid: mrr_3:0.487 mrr_5:0.487 mrr_10:0.487 ndcg_3:0.099 ndcg_5:0.120 ndcg_10:0.159
global step 350 learning rate 0.0500 step-time 0.11 loss 4.6758
  valid: mrr_3:0.487 mrr_5:0.487 mrr_10:0.487 ndcg_3:0.100 ndcg_5:0.120 ndcg_10:0.159
Save model, valid ndcg_10:0.159
WARNING:tensorflow:From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/training/saver.py:963: remove_checkpoint (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.
Instructions for updating:
Use standard file APIs to delete files with this prefix.
W0629 22:14:07.332695 139698143872832 deprecation.py:323] From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/training/saver.py:963: remove_checkpoint (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.
Instructions for updating:
Use standard file APIs to delete files with this prefix.
global step 400 learning rate 0.0500 step-time 0.12 loss 4.8223
  valid: mrr_3:0.487 mrr_5:0.487 mrr_10:0.487 ndcg_3:0.100 ndcg_5:0.120 ndcg_10:0.159
Save model, valid ndcg_10:0.159
global step 450 learning rate 0.0500 step-time 0.11 loss 4.8868
  valid: mrr_3:0.487 mrr_5:0.487 mrr_10:0.487 ndcg_3:0.100 ndcg_5:0.120 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 500 learning rate 0.0500 step-time 0.11 loss 5.0443
  valid: mrr_3:0.487 mrr_5:0.487 mrr_10:0.487 ndcg_3:0.100 ndcg_5:0.120 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 550 learning rate 0.0500 step-time 0.11 loss 5.1240
  valid: mrr_3:0.488 mrr_5:0.488 mrr_10:0.488 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 600 learning rate 0.0500 step-time 0.11 loss 5.1636
  valid: mrr_3:0.488 mrr_5:0.488 mrr_10:0.488 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
global step 650 learning rate 0.0500 step-time 0.12 loss 5.2982
  valid: mrr_3:0.488 mrr_5:0.488 mrr_10:0.488 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
global step 700 learning rate 0.0500 step-time 0.12 loss 5.3696
  valid: mrr_3:0.488 mrr_5:0.488 mrr_10:0.488 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 750 learning rate 0.0500 step-time 0.11 loss 5.4334
  valid: mrr_3:0.489 mrr_5:0.489 mrr_10:0.489 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 800 learning rate 0.0500 step-time 0.11 loss 5.4762
  valid: mrr_3:0.489 mrr_5:0.489 mrr_10:0.489 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
global step 850 learning rate 0.0500 step-time 0.11 loss 5.5111
  valid: mrr_3:0.489 mrr_5:0.489 mrr_10:0.489 ndcg_3:0.100 ndcg_5:0.121 ndcg_10:0.160
global step 900 learning rate 0.0500 step-time 0.15 loss 5.5744
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 950 learning rate 0.0500 step-time 0.15 loss 5.6055
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 1000 learning rate 0.0500 step-time 0.14 loss 5.6606
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.160
Save model, valid ndcg_10:0.160
global step 1050 learning rate 0.0500 step-time 0.12 loss 5.6743
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1100 learning rate 0.0500 step-time 0.11 loss 5.7368
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1150 learning rate 0.0500 step-time 0.11 loss 5.7057
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1200 learning rate 0.0500 step-time 0.11 loss 5.7693
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.161
global step 1250 learning rate 0.0500 step-time 0.11 loss 5.7697
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.101 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1300 learning rate 0.0500 step-time 0.11 loss 5.7582
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1350 learning rate 0.0500 step-time 0.11 loss 5.7635
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1400 learning rate 0.0500 step-time 0.11 loss 5.7705
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1450 learning rate 0.0500 step-time 0.12 loss 5.8009
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
global step 1500 learning rate 0.0500 step-time 0.11 loss 5.7731
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
global step 1550 learning rate 0.0500 step-time 0.13 loss 5.8540
  valid: mrr_3:0.490 mrr_5:0.490 mrr_10:0.490 ndcg_3:0.102 ndcg_5:0.122 ndcg_10:0.161
global step 1600 learning rate 0.0500 step-time 0.13 loss 5.8402
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1650 learning rate 0.0500 step-time 0.11 loss 5.8630
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1700 learning rate 0.0500 step-time 0.11 loss 5.8843
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.161
Save model, valid ndcg_10:0.161
global step 1750 learning rate 0.0500 step-time 0.10 loss 5.8784
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.162
Save model, valid ndcg_10:0.162
global step 1800 learning rate 0.0500 step-time 0.10 loss 5.8676
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.162
global step 1850 learning rate 0.0500 step-time 0.10 loss 5.8459
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.162
Save model, valid ndcg_10:0.162
global step 1900 learning rate 0.0500 step-time 0.10 loss 5.8287
  valid: mrr_3:0.492 mrr_5:0.492 mrr_10:0.492 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.162
Save model, valid ndcg_10:0.162
global step 1950 learning rate 0.0500 step-time 0.10 loss 5.9130
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.103 ndcg_5:0.123 ndcg_10:0.162
Save model, valid ndcg_10:0.162
global step 2000 learning rate 0.0500 step-time 0.10 loss 5.8544
  valid: mrr_3:0.491 mrr_5:0.491 mrr_10:0.491 ndcg_3:0.102 ndcg_5:0.123 ndcg_10:0.162
global step 2050 learning rate 0.0500 step-time 0.10 loss 5.9040
  valid: mrr_3:0.492 mrr_5:0.492 mrr_10:0.492 ndcg_3:0.103 ndcg_5:0.124 ndcg_10:0.162
Save model, valid ndcg_10:0.162
WARNING:tensorflow:From main.py:272: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.

WARNING:tensorflow:From main.py:207: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

W0629 22:28:23.721969 140523548260160 module_wrapper.py:139] From main.py:207: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

WARNING:tensorflow:From main.py:209: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

W0629 22:28:23.722245 140523548260160 module_wrapper.py:139] From main.py:209: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

2021-06-29 22:28:23.722783: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2021-06-29 22:28:23.727921: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494140000 Hz
2021-06-29 22:28:23.728407: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x3c82580 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2021-06-29 22:28:23.728432: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:99: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.

W0629 22:29:04.363309 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:99: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:118: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

W0629 22:29:04.834492 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:118: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:62: The name tf.get_variable_scope is deprecated. Please use tf.compat.v1.get_variable_scope instead.

W0629 22:29:05.745291 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:62: The name tf.get_variable_scope is deprecated. Please use tf.compat.v1.get_variable_scope instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:63: The name tf.AUTO_REUSE is deprecated. Please use tf.compat.v1.AUTO_REUSE instead.

W0629 22:29:05.745539 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/DNN.py:63: The name tf.AUTO_REUSE is deprecated. Please use tf.compat.v1.AUTO_REUSE instead.

WARNING:tensorflow:From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.
Instructions for updating:
If using Keras pass *_constraint arguments to layers.
W0629 22:29:05.778717 140523548260160 deprecation.py:506] From /usr/local/lib64/python3.6/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.
Instructions for updating:
If using Keras pass *_constraint arguments to layers.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/base_ranking_model.py:121: The name tf.get_variable is deprecated. Please use tf.compat.v1.get_variable instead.

W0629 22:29:05.792642 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/ranking_model/base_ranking_model.py:121: The name tf.get_variable is deprecated. Please use tf.compat.v1.get_variable instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:85: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
W0629 22:29:07.391113 140523548260160 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/base_algorithm.py:85: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:278: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
W0629 22:29:09.439128 140523548260160 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:278: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:122: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

W0629 22:29:09.464913 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:122: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:172: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
W0629 22:29:09.833676 140523548260160 deprecation.py:323] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/metrics.py:172: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:227: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

W0629 22:29:10.136213 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:227: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

W0629 22:29:10.137188 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

WARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.global_variables is deprecated. Please use tf.compat.v1.global_variables instead.

W0629 22:29:10.137369 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/learning_algorithm/pairwise_reg_em.py:229: The name tf.global_variables is deprecated. Please use tf.compat.v1.global_variables instead.

INFO:tensorflow:Restoring parameters from ./MSLR_10k_letor/tmp_model_singlet_pointwiseem/ultra.learning_algorithm.PairwiseRegressionEM.ckpt-2050
I0629 22:29:10.162707 140523548260160 saver.py:1284] Restoring parameters from ./MSLR_10k_letor/tmp_model_singlet_pointwiseem/ultra.learning_algorithm.PairwiseRegressionEM.ckpt-2050
WARNING:tensorflow:From main.py:224: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

W0629 22:29:10.554799 140523548260160 module_wrapper.py:139] From main.py:224: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

Reading data in ./MSLR_10k_letor/tmp_data/
Read data from ./MSLR_10k_letor/tmp_data//test in ULTRA format.
Feature reading finish.
List reading finish.
Label reading finish.
Remove 1 invalid queries.
Data reading finish!
Finished reading 1927 queries with lists.
Build Pairwise RegressionEM algorithm.
pointwise_only=True
<ultra.utils.losses_impl.DCGLambdaWeight object at 0x7fce10456828>
Reading model parameters from ./MSLR_10k_letor/tmp_model_singlet_pointwiseem/ultra.learning_algorithm.PairwiseRegressionEM.ckpt-2050
Create direct label feed with list size 514 with feature size 136
Testing 13% finishedTesting 27% finishedTesting 40% finishedTesting 53% finishedTesting 66% finishedTesting 80% finishedTesting 93% finishedTesting 100% finishedWARNING:tensorflow:From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/data_utils.py:367: The name tf.Summary is deprecated. Please use tf.compat.v1.Summary instead.

W0629 22:29:24.963812 140523548260160 module_wrapper.py:139] From /data/violatang/l2r-paper/code/ULTRA/ultra/utils/data_utils.py:367: The name tf.Summary is deprecated. Please use tf.compat.v1.Summary instead.


[Done]
  eval: mrr_3:0.492 mrr_5:0.492 mrr_10:0.492 ndcg_3:0.103 ndcg_5:0.122 ndcg_10:0.160
